<!DOCTYPE html>
<!-- beautify ignore:start -->
<html xmlns:th="http://www.thymeleaf.org"
  lang="ko"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-static-path="/"
  data-template="vertical-menu-template-free"
>

<th:block th:replace="~{./include :: setContent( ~{:: .wrap} ) }"> 
 
 	<div class="wrap">
 	
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="row">
                <div class="col-md-12">
                  <ul class="nav nav-pills flex-column flex-md-row mb-3">
                    <li class="nav-item">
                      <a class="nav-link active" href="profile.html"><i class="bx bx-user me-1"></i> 프로필</a>
                    </li>
                    
                    <li class="nav-item">
                      <a class="nav-link" th:href=@{follow}
                        ><i class="bx bx-user-check me-1"></i> 팔로우</a
                      >
                    </li>
                  </ul>
                  <div class="card mb-4">
                    <h5 class="card-header">Profile Details</h5>
                    <!-- Account -->
                    
                    
                    <form action="profileForm" method="POST" enctype="multipart/form-data">
                    
                    <div class="card-body profile-box">
                      <div class="d-flex align-items-start align-items-sm-center gap-4">
                        <div class="profile-img" style="background: url(/img/avatars/1.jpg) no-repeat center; background-size: cover;">
                        </div>
                        <div class="button-wrapper">
                          <label for="upload" class="btn btn-primary me-2 mb-4" tabindex="0">
                            <span class="d-none d-sm-block">사진 업로드</span>
                            <i class="bx bx-upload d-block d-sm-none"></i>
                            <input
                              type="file"
                              id="upload"
                              name="upload"
                              class="account-file-input"
                              hidden
                              accept="image/png, image/jpeg"
                            />
                          </label>
                          

                          <p class="text-muted mb-0">자기 소개 내용의 짧은 글이 들어가는 텍스트입니다.</p>
                          
                        </div>
                      </div>
                    </div>
                    <hr class="my-0" />
                    <div class="card-body">
                      
                        <div class="row">
                          <div class="mb-3 col-md-6">
                            <label for="user-id" class="form-label">이메일</label>
                            <input
                              class="form-control"
                              type="text"
                              id="memberEmail"
                              name="memberEmail"
                              th:value="${session.member.memberEmail}"
                              autofocus
                              disabled
                            />
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="user-name" class="form-label">이름</label>
                            <input
                              class="form-control"
                              type="text"
                              id="memberName"
                              name="memberName"
                              th:value="${session.member.memberName}"
                              autofocus
                              disabled
                            />
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="language" class="form-label">계정 공개 여부</label>
                            <select id="profileAccount" name="profileAccount" class="select2 form-select">
                              <option value="1">전체 공개</option>
                              <option value="2">팔로우만 공개</option>
                              <option value="3">비공개</option>
                            </select>
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="user-name" class="form-label">닉네임</label>
                            <input
                              class="form-control"
                              type="text"
                              id="memberNick"
                              name="memberNick"
                              th:value="${session.member.memberNick}"
                              autofocus
                             
                            />
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="user-name" class="form-label">웹사이트</label>
                            <input
                              class="form-control"
                              type="text"
                              id="profileWebsite"
                              name="profileWebsite"
                              value="https://www.naver.com/"
                              autofocus
                             
                            />
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="user-name" class="form-label">휴대폰</label>
                            <input
                              class="form-control"
                              type="text"
                              id="memberPhone"
                              name="memberPhone"
                              th:value="${session.member.memberPhone}"
                              autofocus
                             
                            />
                          </div>

                          <div class="mb-3 col-md-6">
                            <label for="organization" class="form-label">비밀번호</label>
                            <input
                              type="password"
                              class="form-control"
                              id="memberPwd"
                              name="memberPwd"
                              value=""
                            />
                          </div>
                          <div class="mb-3 col-md-6">
                            <label for="organization" class="form-label">비밀번호 확인</label>
                            <input
                              type="password"
                              class="form-control"
                              id="memberPwd_ck"
                              name="memberPwd_ck"
                              value=""
                            />
                          </div>
                          <div class="mb-12 col-md-12">
                            
                            <label for="organization" class="form-label">자기소개</label>
                            <textarea
                              class="form-control"
                              type="text"
                              id="profileAboutMe"
                              name="profileAboutMe"
                              autofocus
                            ></textarea>
                          </div>
                         
                         
                        </div>
                        <div class="mt-2">
                          <button type="submit" class="btn btn-primary me-2">저장</button>
                          
                          </form>
                          
                          <span class="delete-member"><a 
                             href="#" type="button"
                            data-bs-toggle="modal"
                            data-bs-target="#modalScrollable"
                            >회원탈퇴</a></span>
                          
                        </div>
                    </div>
                    <!-- /Account -->
                  </div>
                  
                </div>
              </div>
            </div>


            <!-- modals2 start ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->
            <div id="modalClose">
            <form action="withdrawal" method="POST">
          <div class="modal fade" id="modalScrollable" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable" role="document">
              <div class="modal-content">
                
                <div class="modal-body content-modal">

                  <div class="img_section">
                    <!-- <div class="trans_inner">
                        <img src="/img/avatars/1.jpg"  alt="">
                    </div> -->
                    <!-- Bootstrap carousel -->
                <div class="col-md">

                  <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                    
                  </div>
                </div>
                <!-- Bootstrap crossfade carousel -->
                </div>

                  <div class="detail--right_box ">

                    
                    
                    <div> 
                      <p class="align-center">정말 탈퇴하시겠습니까? <br>
                        탈퇴하실려면 비밀번호를 입력하고 <br> 탈퇴하기 버튼을 선택해주세요.</p>
                    </div>

                    <div class="mb-3 col-md-12">
                      <label for="organization" class="form-label">비밀번호</label>
                      <input
                        type="password"
                        class="form-control"
                        id="memberPwd"
                        name="memberPwd"
                      />
                    </div>
                 

                <span class="withdrawalFailure" id="FailureMsg">비밀번호를 잘못 입력했습니다.<br>입력하신 내용을 다시 확인해주세요.</span>


                </div>
                </div>
                <div class="modal-footer content-modal" style="flex-direction: row-reverse">
                 
                  <button type="button" class="btn btn-primary" id="withdrawalMsg">탈퇴하기</button>
                  <button type="button" class="btn btn-primary"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  >취소</button>
                </div>
              </div>
            </div>
          </div>
          <div class="demo-inline-spacing">
            <!-- Button trigger modal -->
            
           
          </div>

			</form>
			</div>
          <!-- modals2 end ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ-->


            <!-- / Content -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <script>
    
    		//비밀번호가 틀렸을 시 비동기 메세지 띄우기
    		$("#withdrawalMsg").click(function(){
    			 var memberPwd = $('#memberPwd').val();
    			$.ajax({
    					method: "POST",
    					url: "./withdrawalForm",
    					data: JSON.stringify({
    						memberPwd : memberPwd
    					}),
    					contentType: "application/json",
    					dataType: "json",
    					success: function(data){
    						console.log("data : ", data);
    						if(data == "0") {
    							console.log("absd");
    							$(".withdrawalFailure").css("display", "inline-block");
    						} else if(data == "1"){
    							console.log("dsfsdsd");
    							location.href="/login";
    						}
    					},
    					error: function(error){
    						return false;
    					}
    			});
    			
    		});
    		
    		//모달창 닫으면 내용 초기화
    		$('#modalClose').on('hidden.bs.modal', function (e) {
    			console.log('modal close');
    			$(this).find('form')[0].reset();
    		});
    		
    </script>
</div>